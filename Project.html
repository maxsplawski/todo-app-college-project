<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Management App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #000;
        }
        body.dark-mode {
            background-color: #333;
            color: white;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 1rem;
            text-align: center;
        }
        header.dark-mode {
            background-color: #000;
        }
        .container {
            padding: 2rem;
            max-width: 800px;
            margin: auto;
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }
        .container.dark-mode {
            background: #444;
        }
        .task {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #ddd;
        }
        .task.dark-mode {
            border-bottom: 1px solid #555;
        }
        .task:last-child {
            border-bottom: none;
        }
        .task input[type="checkbox"] {
            margin-right: 1rem;
        }
        .task .task-name {
            flex-grow: 1;
        }
        .add-task {
            display: flex;
            margin-top: 2rem;
        }
        .add-task input {
            flex-grow: 1;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-right: 0.5rem;
        }
        .add-task input.dark-mode {
            background-color: #555;
            color: white;
        }
        .add-task button {
            padding: 0.5rem 1rem;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .add-task button:hover {
            background-color: #45a049;
        }
        .settings {
            margin-top: 2rem;
            text-align: center;
        }
        .settings button {
            padding: 0.5rem 1rem;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .settings button:hover {
            background-color: #0056b3;
        }
        .deadline {
            margin-left: 1rem;
        }
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            z-index: 1000;
        }
        .modal.dark-mode {
            background: #444;
            color: white;
        }
        .modal.active {
            display: block;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }
        .modal-overlay.active {
            display: block;
        }
    </style>
</head>
<body>
    <header>
        <h1>Task Management App</h1>
    </header>
    <div class="container">
        <div id="tasks">
            <!-- Tasks will appear here -->
        </div>
        <div class="add-task">
            <input type="text" id="taskInput" placeholder="Enter a new task">
            <input type="date" id="deadlineInput" class="deadline">
            <button onclick="addTask()">Add Task</button>
        </div>
        <div class="settings">
            <button onclick="toggleSettingsModal()">Settings</button>
        </div>
    </div>

    <div class="modal-overlay" id="modalOverlay" onclick="toggleSettingsModal()"></div>
    <div class="modal" id="settingsModal">
        <h2>Settings</h2>
        <label>
            <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()"> Dark Mode
        </label>
        <br>
        <label for="languageSelect">Language:</label>
        <select id="languageSelect" onchange="changeLanguage()">
            <option value="en">English</option>
            <option value="pl">Polski</option>
        </select>
        <br>
        <button onclick="toggleSettingsModal()">Close</button>
    </div>

    <script>
        function saveTasksToLocalStorage() {
            const tasks = Array.from(document.querySelectorAll('.task')).map(task => {
                return {
                    name: task.querySelector('.task-name').textContent,
                    deadline: task.querySelector('.deadline').textContent.replace('Due: ', ''),
                    completed: task.querySelector('input[type="checkbox"]').checked
                };
            });
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        function loadTasksFromLocalStorage() {
            const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            tasks.forEach(task => {
                const taskContainer = document.getElementById('tasks');

                const taskDiv = document.createElement('div');
                taskDiv.classList.add('task');

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = task.completed;
                checkbox.onchange = saveTasksToLocalStorage;

                const taskNameDiv = document.createElement('div');
                taskNameDiv.classList.add('task-name');
                taskNameDiv.textContent = task.name;

                const deadlineDiv = document.createElement('div');
                deadlineDiv.classList.add('deadline');
                deadlineDiv.textContent = task.deadline ? `Due: ${task.deadline}` : 'No deadline';

                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = () => {
                    taskContainer.removeChild(taskDiv);
                    saveTasksToLocalStorage();
                };

                taskDiv.appendChild(checkbox);
                taskDiv.appendChild(taskNameDiv);
                taskDiv.appendChild(deadlineDiv);
                taskDiv.appendChild(deleteButton);
                taskContainer.appendChild(taskDiv);
            });
        }

        function addTask() {
            const taskInput = document.getElementById('taskInput');
            const deadlineInput = document.getElementById('deadlineInput');
            const taskName = taskInput.value.trim();
            const deadline = deadlineInput.value;

            if (taskName === '') {
                alert('Please enter a task name.');
                return;
            }

            const taskContainer = document.getElementById('tasks');

            const taskDiv = document.createElement('div');
            taskDiv.classList.add('task');

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.onchange = saveTasksToLocalStorage;

            const taskNameDiv = document.createElement('div');
            taskNameDiv.classList.add('task-name');
            taskNameDiv.textContent = taskName;

            const deadlineDiv = document.createElement('div');
            deadlineDiv.classList.add('deadline');
            deadlineDiv.textContent = deadline ? `Due: ${deadline}` : 'No deadline';

            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'Delete';
            deleteButton.onclick = () => {
                taskContainer.removeChild(taskDiv);
                saveTasksToLocalStorage();
            };

            taskDiv.appendChild(checkbox);
            taskDiv.appendChild(taskNameDiv);
            taskDiv.appendChild(deadlineDiv);
            taskDiv.appendChild(deleteButton);
            taskContainer.appendChild(taskDiv);

            taskInput.value = '';
            deadlineInput.value = '';

            saveTasksToLocalStorage();
        }

        function toggleSettingsModal() {
            const modal = document.getElementById('settingsModal');
            const overlay = document.getElementById('modalOverlay');
            modal.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            document.querySelector('header').classList.toggle('dark-mode');
            document.querySelector('.container').classList.toggle('dark-mode');
            document.querySelectorAll('.task').forEach(task => task.classList.toggle('dark-mode'));
            document.querySelector('.add-task input').classList.toggle('dark-mode');
            document.getElementById('settingsModal').classList.toggle('dark-mode');

            const isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
        }

        function changeLanguage() {
            const language = document.getElementById('languageSelect').value;
            localStorage.setItem('language', language);
            if (language === 'pl') {
                document.querySelector('h1').textContent = 'Aplikacja ZarzÄ…dzania Zadaniami';
            } else {
                document.querySelector('h1').textContent = 'Task Management App';
            }
        }

        window.onload = () => {
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            if (isDarkMode) toggleDarkMode();

            document.getElementById('languageSelect').value = localStorage.getItem('language') || 'en';
            changeLanguage();

            loadTasksFromLocalStorage();
        };
    </script>
</body>
</html>
